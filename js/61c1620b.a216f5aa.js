(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["61c1620b"],{"47b2":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"iv-page"},[s("TitleBar",{attrs:{titleTx:t.title}}),s("span",{staticClass:"iv-tt-gray",staticStyle:{color:"black"}},[t._v(t._s(t.$t("quickbuy"))+":")]),s("div",{staticStyle:{"margin-top":"10px"}},[s("q-btn",{staticStyle:{color:"goldenrod","margin-left":"10px"},attrs:{outline:"",label:"1 ETH"},on:{click:function(e){t.buy("1")}}}),s("q-btn",{staticStyle:{color:"goldenrod","margin-left":"10px"},attrs:{outline:"",label:"2 ETH"},on:{click:function(e){t.buy("2")}}}),s("q-btn",{staticStyle:{color:"goldenrod","margin-left":"10px"},attrs:{outline:"",label:"5 ETH"},on:{click:function(e){t.buy("5")}}}),s("q-btn",{staticStyle:{color:"goldenrod","margin-left":"10px"},attrs:{outline:"",label:"10 ETH"},on:{click:function(e){t.buy("10")}}})],1),s("span",{staticClass:"iv-tt-gray",staticStyle:{color:"black","margin-top":"10px"}},[t._v(t._s(t.$t("customamt"))+":")]),s("q-input",{staticClass:"in-in-ma",attrs:{"float-label":t.$t("ivamt"),type:"number"},model:{value:t.toAmt,callback:function(e){t.toAmt=e},expression:"toAmt"}}),s("span",{staticClass:"iv-tt-gray"},[t._v(t._s(t.$t("needcusum"))+":"+t._s(.01*t.toAmt/t.global.config.mcoinPrice)+" OK0X")]),s("q-btn",{staticClass:"btn-next",attrs:{label:t.$t("buy"),color:"primary"},on:{click:t.toNext}}),s("span",{staticClass:"iv-tt-gray",staticStyle:{color:"dodgerblue"},on:{click:t.toInvestReadme}},[s("u",[t._v(t._s(t.$t("lookgg")))])])],1)},a=[];i._withStripped=!0;var n=s("9bfb"),l=s("e7ea"),o=(s("a002"),s("96a1"),s("3452"),{components:{TitleBar:n["a"]},data:function(){return{currentBalance:this.global.wallet.lastEthbalance,title:this.$t("buy"),toAddress:"",toAmt:"",canInvest:!0,investBmobId:"",investAmt:""}},mounted:function(){var t=this;if("true"===this.global.bmobConfig.investDistrice24){var e={address:this.global.wallet.ethAddress};this.$axios.get(this.global.apiUrl.BmobRestAPIUrl+"invest?where="+encodeURI(JSON.stringify(e)),{headers:this.global.apiUrl.BmobRestAPIHeaders}).then(function(e){if(200===e.status){var s=e.data.results;0!==s.length&&(t.investBmobId=s[0].objectId,t.canInvest=(new Date).getTime()-s[0].time>=864e5)}})}},methods:{toInvestReadme:function(){this.$router.push("/withdrawreadme")},bmobAddOrUpdate:function(){""===this.investBmobId?this.addAInvest():this.updateInvestTime(this.investBmobId)},updateInvestTime:function(t){this.$axios.put(this.global.apiUrl.BmobRestAPIUrl+"invest/"+t,{time:(new Date).getTime()+""},{headers:this.global.apiUrl.BmobRestAPIHeaders}).then(function(t){})},addAInvest:function(){this.$axios.post(this.global.apiUrl.BmobRestAPIUrl+"invest",{address:this.global.wallet.ethAddress,time:(new Date).getTime()+""},{headers:this.global.apiUrl.BmobRestAPIHeaders}).then(function(t){})},toNext:function(){var t=this,e=this;this.canInvest?this.toAmt>=this.global.bmobConfig.minPerInvest&&this.toAmt<=this.global.config.maxPerInvest?this.toAmt>this.global.wallet.lastEthbalance?toast(this.$t("ethnotenough")):(this.global.wallet.lastEthbalance-this.toAmt<.001&&toast(this.$t("gasfeeless")),.01*this.toAmt/this.global.config.mcoinPrice>this.global.wallet.lastMcoinBalance?this.$q.dialog({title:"",message:this.$t("cmatless")}).then(function(){e.$router.push({path:"/ethtransfer",query:{p1:"OK0X",p2:t.global.wallet.lastMcoinBalance}})}).catch(function(){}):(this.investAmt=this.toAmt,this.showPswdInputDialog())):toast(this.$t("singleinv",{min:this.global.bmobConfig.minPerInvest,max:this.global.config.maxPerInvest})):toast("24 "+this.$t("cashonce24"))},buy:function(t){var e=this;t>this.global.wallet.lastEthbalance?toast(this.$t("ethnotenough")):(this.global.wallet.lastEthbalance-t<.001&&toast(this.$t("gasfeeless")),.01*t/this.global.config.mcoinPrice>this.global.wallet.lastMcoinBalance?this.$q.dialog({title:"",message:this.$t("cmatless")}).then(function(){_this.$router.push({path:"/ethtransfer",query:{p1:"OK0X",p2:e.global.wallet.lastMcoinBalance}})}).catch(function(){}):(this.investAmt=t,this.showPswdInputDialog()))},showPswdInputDialog:function(){var t=this,e=this;this.$q.dialog({title:this.itmeName1,message:this.$t("enterpswd"),prompt:{model:"",type:"text"},cancel:!0,color:"secondary"}).then(function(s){if(""===s)toast(e.$t("pswdnull"));else{e.$q.loading.show({message:e.$t("txsubmiting"),spinnerSize:50});var i=e.util.getWallet(e,s);t.doInvest(i)}}).catch(function(){})},doInvest:function(t){var e=this,s=this.global.m3gameContract.connect(t),i={value:l["ethers"].utils.parseEther(this.investAmt+"")};s.inverstOnce(i).then(function(t){console.log(t),e.$q.loading.hide(),e.listen4InvestResult(t.hash),e.util.showInfoDialog(e,e.$t("submitted"),t.hash,!0)}).catch(function(t){e.util.reprotError2Bmob(e,"inverstAgain",t),e.$q.loading.hide()})},listen4InvestResult:function(t){var e=this;this.global.defaultProvider.once(t,function(t){console.log("----Transaction Minded:----"),console.log(t),1===t.status?(e.$emit("investSuccess"),toast(e.$t("investsuccess")),e.bmobAddOrUpdate()):toast(e.$t("investfail"))})}}}),c=o,r=(s("ea97"),s("2877")),h=Object(r["a"])(c,i,a,!1,null,null,null);h.options.__file="Invest.vue";e["default"]=h.exports},"6fd7":function(t,e,s){},"9bfb":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title-bar"},[s("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(e){return t.goBack(e)}}}),s("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},a=[];i._withStripped=!0;var n={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},l=n,o=(s("a675"),s("2877")),c=Object(o["a"])(l,i,a,!1,null,null,null);c.options.__file="TitleBar.vue";e["a"]=c.exports},a675:function(t,e,s){"use strict";var i=s("ca51"),a=s.n(i);a.a},ca51:function(t,e,s){},ea97:function(t,e,s){"use strict";var i=s("6fd7"),a=s.n(i);a.a}}]);